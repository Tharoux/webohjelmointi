{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kansiot\\\\Koulu\\\\Tietojenkasittely\\\\Webohjelmointi\\\\Demot\\\\GitHub\\\\webohjelmointi\\\\athlete\\\\src\\\\context.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nconst Context = React.createContext(); //DIA 65!!!!!!!!!!!!!!!!!!!!\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"DELETE_ATHLETE\":\n      return {\n        //Filter out the deleted athlete. Payload contains id only.\n        athletes: state.athletes.filter(athlete => athlete.id !== action.payload)\n      };\n\n    case \"ADD_ATHLETE\":\n      return {\n        //Set action.payload.data into ...state.athletes. Payload contains all data.\n        athletes: [...state.athletes, action.payload.data]\n      };\n\n    case \"UPDATE_ATHLETE\":\n      const testmap = athlete => {\n        console.log(athlete);\n\n        if (athlete.id === action.payload.id) {\n          athlete = action.payload;\n        } else {\n          athlete;\n        }\n\n        console.log(athlete);\n        return athlete;\n      };\n\n      const array = state.athletes.map(testmap);\n      console.log(\"ARRAY\");\n      console.log(array);\n      return {\n        athletes: state.athletes.map(athlete => athlete.id === action.payload.id ? athlete = action.payload : athlete)\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport class Provider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      athletes: [],\n      dispatch: action => {\n        this.setState(state => reducer(state, action));\n      }\n    };\n  }\n\n  async componentDidMount() {\n    await axios.get(\"http://localhost:3000/athletes\").then(res => {\n      this.setState({\n        athletes: res.data\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Context.Provider, {\n      value: this.state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, this.props.children);\n  }\n\n}\nexport const Consumer = Context.Consumer;","map":{"version":3,"sources":["D:/Kansiot/Koulu/Tietojenkasittely/Webohjelmointi/Demot/GitHub/webohjelmointi/athlete/src/context.js"],"names":["React","Component","axios","Context","createContext","reducer","state","action","type","athletes","filter","athlete","id","payload","data","testmap","console","log","array","map","Provider","dispatch","setState","componentDidMount","get","then","res","render","props","children","Consumer"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,OAAO,GAAGH,KAAK,CAACI,aAAN,EAAhB,C,CAEA;;AAEA,MAAMC,OAAO,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AAE/B,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,gBAAL;AACI,aAAO;AACH;AACAC,QAAAA,QAAQ,EAAEH,KAAK,CAACG,QAAN,CAAeC,MAAf,CACLC,OAAD,IAAaA,OAAO,CAACC,EAAR,KAAeL,MAAM,CAACM,OAD7B;AAFP,OAAP;;AAMJ,SAAK,aAAL;AACI,aAAO;AACH;AACAJ,QAAAA,QAAQ,EAAE,CAAC,GAAGH,KAAK,CAACG,QAAV,EAAoBF,MAAM,CAACM,OAAP,CAAeC,IAAnC;AAFP,OAAP;;AAIJ,SAAK,gBAAL;AAEI,YAAMC,OAAO,GAAIJ,OAAD,IAAa;AACzBK,QAAAA,OAAO,CAACC,GAAR,CAAYN,OAAZ;;AACA,YAAIA,OAAO,CAACC,EAAR,KAAeL,MAAM,CAACM,OAAP,CAAeD,EAAlC,EAAsC;AAClCD,UAAAA,OAAO,GAAGJ,MAAM,CAACM,OAAjB;AACH,SAFD,MAEO;AACHF,UAAAA,OAAO;AACV;;AACDK,QAAAA,OAAO,CAACC,GAAR,CAAYN,OAAZ;AAEA,eAAOA,OAAP;AACH,OAVD;;AAYA,YAAMO,KAAK,GAAGZ,KAAK,CAACG,QAAN,CAAeU,GAAf,CAAmBJ,OAAnB,CAAd;AAEAC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AAEA,aAAO;AACHT,QAAAA,QAAQ,EAAEH,KAAK,CAACG,QAAN,CAAeU,GAAf,CAAoBR,OAAD,IACzBA,OAAO,CAACC,EAAR,KAAeL,MAAM,CAACM,OAAP,CAAeD,EAA9B,GACOD,OAAO,GAAGJ,MAAM,CAACM,OADxB,GAEMF,OAHA;AADP,OAAP;;AAOJ;AACI,aAAOL,KAAP;AAxCR;AA0CH,CA5CD;;AA8CA,OAAO,MAAMc,QAAN,SAAuBnB,SAAvB,CAAiC;AAAA;AAAA;AAAA,SACpCK,KADoC,GAC5B;AACJG,MAAAA,QAAQ,EAAE,EADN;AAEJY,MAAAA,QAAQ,EAAGd,MAAD,IAAY;AAClB,aAAKe,QAAL,CAAehB,KAAD,IAAWD,OAAO,CAACC,KAAD,EAAQC,MAAR,CAAhC;AACH;AAJG,KAD4B;AAAA;;AASpC,QAAMgB,iBAAN,GAA0B;AACtB,UAAMrB,KAAK,CAACsB,GAAN,CAAU,gCAAV,EACLC,IADK,CACCC,GAAD,IAAS;AACX,WAAKJ,QAAL,CAAc;AAACb,QAAAA,QAAQ,EAAEiB,GAAG,CAACZ;AAAf,OAAd;AACH,KAHK,CAAN;AAIH;;AAEDa,EAAAA,MAAM,GAAI;AACN,wBACI,oBAAC,OAAD,CAAS,QAAT;AAAkB,MAAA,KAAK,EAAE,KAAKrB,KAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKsB,KAAL,CAAWC,QADhB,CADJ;AAKH;;AAtBmC;AAyBxC,OAAO,MAAMC,QAAQ,GAAG3B,OAAO,CAAC2B,QAAzB","sourcesContent":["import React, {Component} from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst Context = React.createContext();\r\n\r\n//DIA 65!!!!!!!!!!!!!!!!!!!!\r\n\r\nconst reducer = (state, action) => {\r\n\r\n    switch (action.type) {\r\n        case \"DELETE_ATHLETE\":\r\n            return {\r\n                //Filter out the deleted athlete. Payload contains id only.\r\n                athletes: state.athletes.filter(\r\n                    (athlete) => athlete.id !== action.payload\r\n                ),\r\n            };\r\n        case \"ADD_ATHLETE\":\r\n            return {\r\n                //Set action.payload.data into ...state.athletes. Payload contains all data.\r\n                athletes: [...state.athletes, action.payload.data],\r\n            };\r\n        case \"UPDATE_ATHLETE\":  \r\n\r\n            const testmap = (athlete) => {\r\n                console.log(athlete);\r\n                if (athlete.id === action.payload.id) {\r\n                    athlete = action.payload;\r\n                } else {\r\n                    athlete;\r\n                }\r\n                console.log(athlete);\r\n                \r\n                return athlete;\r\n            }\r\n\r\n            const array = state.athletes.map(testmap);\r\n\r\n            console.log(\"ARRAY\");\r\n            console.log(array);\r\n\r\n            return {\r\n                athletes: state.athletes.map((athlete) =>\r\n                    athlete.id === action.payload.id\r\n                        ? (athlete = action.payload)\r\n                        : athlete\r\n                    )\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport class Provider extends Component {\r\n    state = {\r\n        athletes: [],\r\n        dispatch: (action) => {\r\n            this.setState((state) => reducer(state, action))\r\n        }\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n        await axios.get(\"http://localhost:3000/athletes\")\r\n        .then((res) => {\r\n            this.setState({athletes: res.data})\r\n        });\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <Context.Provider value={this.state}>\r\n                {this.props.children}\r\n            </Context.Provider>\r\n        );\r\n    }\r\n}\r\n\r\nexport const Consumer = Context.Consumer;"]},"metadata":{},"sourceType":"module"}